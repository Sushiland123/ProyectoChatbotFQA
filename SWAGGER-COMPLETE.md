# ğŸ“š DocumentaciÃ³n Swagger - Sistema Completo\n\n## ğŸŒ **URLs de DocumentaciÃ³n**\n\n### ğŸ“– **Swagger UI por Microservicio:**\n\n| Microservicio | Puerto | Swagger URL | DescripciÃ³n |\n|---------------|--------|-------------|-------------|\n| **ğŸŒ API Gateway** | 3000 | http://localhost:3000/api/docs | **Punto de entrada principal** |\n| **ğŸ” Auth Service** | 3001 | http://localhost:3001/api/docs | AutenticaciÃ³n y usuarios |\n| **â“ FAQ Service** | 3002 | http://localhost:3002/api/docs | GestiÃ³n de preguntas frecuentes |\n| **ğŸ¤– Chatbot Service** | 3003 | http://localhost:3003/api/docs | Motor de conversaciÃ³n |\n\n## ğŸš€ **InstalaciÃ³n de Swagger en todos los servicios**\n\n### **OpciÃ³n 1: Instalar todo de una vez**\n```bash\nnpm run install:swagger\n```\n\n### **OpciÃ³n 2: Instalar por servicio**\n```bash\n# API Gateway\nnpm run install:swagger:gateway\n\n# Auth Service  \nnpm run install:swagger:auth\n\n# FAQ Service\nnpm run install:swagger:faq\n\n# Chatbot Service (ya instalado)\nnpm run install:swagger:chatbot\n```\n\n### **OpciÃ³n 3: Manual (si hay problemas)**\n```bash\n# En cada directorio de servicio:\ncd api-gateway\nnpm install @nestjs/swagger@7.4.2 swagger-ui-express@5.0.0 class-validator@0.14.1 class-transformer@0.5.1 --force\n\ncd ../auth-service\nnpm install @nestjs/swagger@7.4.2 swagger-ui-express@5.0.0 class-validator@0.14.1 class-transformer@0.5.1 --force\n\n# etc...\n```\n\n## ğŸ”§ **ConfiguraciÃ³n por Servicio**\n\n### ğŸŒ **API Gateway (Puerto 3000)**\n- **Color:** Verde ğŸŸ¢\n- **FunciÃ³n:** Punto de entrada y proxy\n- **AutenticaciÃ³n:** JWT Bearer Token\n- **Rutas:** `/auth/*`, `/chat/*`, `/faq/*`\n\n### ğŸ” **Auth Service (Puerto 3001)**  \n- **Color:** Azul ğŸ”µ\n- **FunciÃ³n:** GestiÃ³n de usuarios y JWT\n- **Endpoints:** Login, Register, Profile\n- **Sin autenticaciÃ³n:** Para login/register\n\n### â“ **FAQ Service (Puerto 3002)**\n- **Color:** Naranja ğŸŸ  \n- **FunciÃ³n:** CRUD de preguntas frecuentes\n- **AutenticaciÃ³n:** JWT requerido para admin\n- **Endpoints:** GET, POST, PUT, DELETE FAQs\n\n### ğŸ¤– **Chatbot Service (Puerto 3003)**\n- **Color:** Azul Oscuro ğŸ”·\n- **FunciÃ³n:** Motor de conversaciÃ³n IA\n- **Sin autenticaciÃ³n:** Para uso interno\n- **Fallback:** Dialogflow â†’ OpenAI\n\n## ğŸ¨ **CaracterÃ­sticas de cada Swagger**\n\n### âœ¨ **Comunes en todos:**\n- âœ… **Try it out** funcional\n- âœ… **Ejemplos** de request/response\n- âœ… **ValidaciÃ³n** con class-validator\n- âœ… **CÃ³digos de error** documentados\n- âœ… **DTOs** tipados\n- âœ… **Colores personalizados** por servicio\n\n### ğŸ”‘ **EspecÃ­ficas:**\n\n#### **API Gateway:**\n- âœ… **JWT Authentication** configurado\n- âœ… **Rate limiting** documentado\n- âœ… **Proxy routes** explicadas\n- âœ… **CORS** configurado\n\n#### **Auth Service:**\n- âœ… **Login/Register** forms\n- âœ… **Password validation** rules\n- âœ… **JWT token** examples\n- âœ… **User roles** explained\n\n#### **FAQ Service:**\n- âœ… **CRUD operations** complete\n- âœ… **Search** functionality\n- âœ… **Categories** management\n- âœ… **Admin only** endpoints marked\n\n#### **Chatbot Service:**\n- âœ… **Conversation flow** documented\n- âœ… **Fallback logic** explained\n- âœ… **Analytics** endpoints\n- âœ… **Escalation** process\n\n## ğŸƒâ€â™‚ï¸ **Inicio RÃ¡pido**\n\n### **1. Instalar dependencias Swagger:**\n```bash\nnpm run install:swagger\n```\n\n### **2. Iniciar todos los servicios:**\n```bash\nnpm run start:dev\n```\n\n### **3. Acceder a documentaciÃ³n:**\n- ğŸŒ **Gateway:** http://localhost:3000/api/docs\n- ğŸ” **Auth:** http://localhost:3001/api/docs  \n- â“ **FAQ:** http://localhost:3002/api/docs\n- ğŸ¤– **Chatbot:** http://localhost:3003/api/docs\n\n## ğŸ”„ **Flujo de uso completo**\n\n### **1. AutenticaciÃ³n (Auth Service):**\n```bash\n# POST /auth/login\n{\n  \"email\": \"admin@test.com\",\n  \"password\": \"123456\"\n}\n# Response: { \"access_token\": \"jwt_token_here\" }\n```\n\n### **2. Usar token en API Gateway:**\n```bash\n# Header: Authorization: Bearer jwt_token_here\n# Acceso a todas las rutas protegidas\n```\n\n### **3. Chat (sin autenticaciÃ³n):**\n```bash\n# POST /chat/message\n{\n  \"message\": \"Â¿CuÃ¡les son sus horarios?\",\n  \"sessionId\": \"user-123\"\n}\n```\n\n### **4. FAQ (con autenticaciÃ³n admin):**\n```bash\n# POST /faq (requiere admin token)\n{\n  \"pregunta\": \"Â¿CuÃ¡les son sus horarios?\",\n  \"respuesta\": \"De 8 AM a 6 PM\",\n  \"categoria\": \"horarios\"\n}\n```\n\n## ğŸ“Š **Analytics de DocumentaciÃ³n**\n\nCada servicio incluye mÃ©tricas de uso:\n- ğŸ“ˆ **Requests por endpoint**\n- â±ï¸ **Tiempos de respuesta**\n- ğŸš¨ **CÃ³digos de error**\n- ğŸ‘¥ **Usuarios activos**\n\n## ğŸ› **Debugging**\n\n### **Problemas comunes:**\n\n#### **Error de dependencias:**\n```bash\n# SoluciÃ³n: Forzar instalaciÃ³n\nnpm install --force\n```\n\n#### **Puerto ocupado:**\n```bash\n# Verificar puertos\nnetstat -ano | findstr :3000\n# Cambiar puerto en .env\n```\n\n#### **CORS errors:**\n```bash\n# Verificar configuraciÃ³n en main.ts\n# Agregar origin del frontend\n```\n\n## ğŸ“‹ **Checklist de DocumentaciÃ³n**\n\n- [ ] **API Gateway** Swagger instalado y funcionando\n- [ ] **Auth Service** Swagger instalado y funcionando  \n- [ ] **FAQ Service** Swagger instalado y funcionando\n- [ ] **Chatbot Service** Swagger instalado y funcionando\n- [ ] **JWT Authentication** configurado en Gateway\n- [ ] **Rate Limiting** documentado\n- [ ] **CORS** configurado\n- [ ] **Ejemplos** de request/response en todos los endpoints\n- [ ] **CÃ³digos de error** documentados\n- [ ] **DTOs** validados\n\n## ğŸ¯ **PrÃ³ximos pasos**\n\n1. **Instalar Swagger** en todos los servicios\n2. **Configurar main.ts** en cada servicio\n3. **Agregar anotaciones** a controllers\n4. **Crear DTOs** para validaciÃ³n\n5. **Probar endpoints** en Swagger UI\n6. **Documentar ejemplos** especÃ­ficos\n\n---\n\n**âœ¨ Â¡Tu sistema tendrÃ¡ documentaciÃ³n completa e interactiva en todos los microservicios! âœ¨**\n